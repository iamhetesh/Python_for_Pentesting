<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Malware Detection</title>
  </head>
  <body>
    <h1>Malware Detection Results</h1>
    <h2>Model Evaluation Metrics</h2>
    <p>Training Loss: {{ training_loss }}</p>
    <p>Training Accuracy: {{ training_accuracy }}</p>
    <p>Precision Score: {{ precision }}</p>
    <p>F1 Score: {{ f1 }}</p>
    <p>Recall Score: {{ recall }}</p>
    <h2>Training History</h2>
    <table>
      <thead>
        <tr>
          <th>Epoch</th>
          <th>Loss</th>
          <th>Accuracy</th>
          <th>Val Loss</th>
          <th>Val Accuracy</th>
        </tr>
      </thead>
      <tbody>
        {% for history in epoch_history %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ history['loss'] }}</td>
          <td>{{ history['accuracy'] }}</td>
          <td>{{ history['val_loss'] }}</td>
          <td>{{ history['val_accuracy'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <img src="{{ url_for('plot') }}" alt="Training and Validation Metrics Plot">
    <h2>Confusion Matrix</h2>
    <table>
      <thead>
        <tr>
          <th></th>
          <th>Predicted Malware</th>
          <th>Predicted Legitimate</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Actual Malware</th>
          <td>{{ cm[0][0] }}</td>
          <td>{{ cm[0][1] }}</td>
        </tr>
        <tr>
          <th>Actual Legitimate</th>
          <td>{{ cm[1][0] }}</td>
          <td>{{ cm[1][1] }}</td>
        </tr>
      </tbody>
    </table>
    <h2>Grouping</h2>
    <form action="/group" method="post">
    <input type="submit" value="Group">
    </form>
  </body>
</html>
